I need to adapt a component to my m3-design-v2 design system. I will provide a screenshot of the component and the original code. Please follow the systematic component adaptation workflow to recreate this component using 100% design system tokens with automated Playwright verification.

Follow this workflow: Phase 1 is Analysis and Planning. Analyze the screenshot I provide for visual patterns including layout structure, typography hierarchy, color palette, interactive elements, spacing patterns, and visual details like border radius, shadows, and transitions. Review the original code I provide for hardcoded values that need to be replaced with design system tokens. Specifically look for color hex codes that should become design system color tokens, pixel spacing that should use spacing scale tokens following the 8px baseline grid, font sizes and families that should use typography tokens, border radius values that should use shape tokens, and transition durations that should use motion tokens. Create a token mapping table showing the original value, which design system token should be used, and whether that token exists or needs to be created. Identify any missing design system assets such as colors not in the current palette, spacing values not available, typography scales undefined, or motion patterns not established.

Phase 2 is Design System Updates. If the analysis reveals missing tokens, add new color tokens to m3-design-v2/src/styles/tokens.css following existing naming patterns. Always include dark mode variants in the @media prefers-color-scheme dark block. Add spacing, shape, or motion tokens if required. Document the rationale for new additions. Follow these principles: use existing naming patterns like --wy-* for component-specific tokens, use semantic names not presentational names, always provide dark mode variants, and document the rationale in comments.

Phase 3 is Implementation. Create a Web Component in m3-design-v2/src/components/wy-[name].js using LitElement as the base class. Define reactive properties from the original component. Import fonts in the Shadow DOM if using icons or display typography by adding @import statements in the static styles for Playfair Display and Material Symbols Outlined. Use design system tokens exclusively with no hardcoded values. Follow Material Design 3 state layer patterns for interactive elements using ::before pseudo-elements with opacity transitions. Add focus-visible outlines that are 3px solid with 2px offset. Never use !important declarations. Use semantic HTML elements. The component structure should import LitElement html and css from lit, define a class extending LitElement, declare static properties for reactive data, define static styles using css template literal with all design system tokens, import necessary fonts for Shadow DOM, implement state layers for interactive elements with position relative and overflow hidden on the element and a ::before pseudo-element with opacity transitions, define focus-visible states, and implement the render method using html template literal that recreates the structure from the original code.

Phase 4 is Automated Testing with Playwright. This is critical: use Playwright to verify the adaptation before showing me results. First build and start the dev server by running cd m3-design-v2 then npm run build then npm run dev. Create a test page if needed with basic HTML importing the design system tokens and the new component. Run the automated component test using python3 skills/component-adaptation/test-component.py with the --url flag pointing to the test page, --selector for the component name, and --output to save results. The automated checks must include visual capture in both light and dark mode screenshots, layout measurements verifying dimensions spacing and alignment, token usage verification scanning for hardcoded hex or rgba values, interactive state testing for hover focus and active states, dark mode verification ensuring colors differ between schemes, Material Icons check if icons are used to confirm font loading, checking for no !important declarations, and verifying no horizontal overflow. You can also create manual Playwright verification scripts as needed to check computed styles, measure specific properties, test interactions, or verify token usage.

Phase 5 is Quality Assurance. Verify the component visually matches the original screenshot, all Playwright automated tests are passing, zero hardcoded values are detected, dark mode is working in both color schemes, there are no console errors, semantic HTML structure is used, ARIA labels are present where appropriate, and focus states are visible and accessible.

Phase 6 is Deliverables. Provide a token mapping report showing a table with original value, design system token used, and status, plus a list of new tokens created if any with rationale for design system updates. Provide Playwright test results including screenshot comparisons of adapted versus original, light mode and dark mode screenshots, layout measurement verification output, token usage scan results showing zero hardcoded values, interactive state test screenshots, and console log verification with no errors. Provide the complete component code including the full Web Component implementation, registration in src/main.js, entry in src/data/components.json with props and examples, and a usage example in markup. If applicable provide design system updates showing new tokens added to tokens.css with dark mode variants and justification for each new token. Provide integration instructions explaining how to use the component, available props attributes and slots, event listeners, and build and deployment commands.

The adaptation is complete and ready for integration when all of these success criteria pass: Visual fidelity where the adapted component matches the original screenshot's look and feel, token usage showing 100% design system tokens with zero hardcoded values, Playwright tests all passing with screenshots as proof, dark mode where the component works correctly in both light and dark color schemes, interactive states following Material Design 3 state layer patterns for hover focus and active, code quality with no !important declarations clean structure and semantic HTML, fonts where Material Icons and typography fonts are loading in Shadow DOM if used, documentation where the component is added to components.json with complete API docs, no layout issues verified by Playwright showing correct dimensions and no overflow, and accessibility with focus states semantic elements and ARIA labels where needed.

Avoid these anti-patterns: hardcoded color values using hex codes rgb or rgba, magic number spacing like margin 24px without tokens, arbitrary transition durations like transition 0.3s, !important declarations, changing background-color directly on hover instead of using state layers, hardcoded border-radius values, skipping dark mode testing, forgetting to import fonts in Shadow DOM, using inline styles for theming, and delivering without Playwright verification.

Design system compliance checklist for colors: all colors must use var(--md-sys-color-*) or var(--wy-*) tokens, dark mode variants must be defined, and color-mix() should be used for transparency instead of rgba(). For typography: fonts must use var(--font-serif) var(--font-sans) or var(--font-display), font sizes should use clamp() for fluid scaling when appropriate, and letter spacing should use design system values like 0.05em 0.1em or 0.15em. For spacing: all spacing must use var(--spacing-*) tokens from xxs through 3xl, must follow 8px baseline grid, and responsive spacing should use clamp(). For shape: border radius must use var(--md-sys-shape-corner-*) tokens, and capsule shapes must use var(--md-sys-shape-corner-full). For motion: transitions must use var(--md-sys-motion-duration-*) tokens, easing curves must use var(--md-sys-motion-easing-*) tokens, and no magic number durations. For interactive states: hover states must use ::before pseudo-element overlay, opacity must be controlled by var(--md-sys-state-hover-opacity), focus states must use 3px outline with 2px offset, and never change background-color directly on hover.

Execute the complete workflow with Playwright automation and provide all deliverables listed above including the token mapping report, Playwright test results with screenshots, complete component code, design system updates if any, and integration instructions.
